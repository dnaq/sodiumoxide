<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Authenticated Encryption with Additional Data This operation:"><meta name="keywords" content="rust, rustlang, rust-lang, aead"><title>sodiumoxide::crypto::aead - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../sodiumoxide/index.html'><div class='logo-container rust-logo'><img src='../../../rust-logo.png' alt='logo'></div></a><p class="location">Module aead</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li></ul></div><p class="location"><a href="../../index.html">sodiumoxide</a>::<wbr><a href="../index.html">crypto</a></p><div id="sidebar-vars" data-name="aead" data-ty="mod" data-relpath="../"></div><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button">?</button>
                <a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">sodiumoxide</a>::<wbr><a href="../index.html">crypto</a>::<wbr><a class="mod" href="">aead</a><button id="copy-path" onclick="copy_path(this)"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item import"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/sodiumoxide/crypto/aead/mod.rs.html#1-50" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Authenticated Encryption with Additional Data
This operation:</p>
<ul>
<li>Encrypts a message with a key and a nonce to keep it confidential</li>
<li>Computes an authentication tag. This tag is used to make sure that the message,
as well as optional, non-confidential (non-encrypted) data, haven’t been tampered with.</li>
</ul>
<h1 id="selected-primitive" class="section-header"><a href="#selected-primitive">Selected primitive</a></h1>
<p><code>seal()</code>, <code>seal_detached()</code>, <code>open()</code> and <code>open_detached()</code> are currently
an implementation of <code>chacha20poly1305_ietf</code>, i.e. the IETF construction defined in
<a href="https://tools.ietf.org/html/rfc7539">https://tools.ietf.org/html/rfc7539</a>.</p>
<h1 id="example-combined-mode" class="section-header"><a href="#example-combined-mode">Example (combined mode)</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sodiumoxide::crypto::aead</span>;

<span class="kw">let</span> <span class="ident">k</span> <span class="op">=</span> <span class="ident">aead::gen_key</span>();
<span class="kw">let</span> <span class="ident">n</span> <span class="op">=</span> <span class="ident">aead::gen_nonce</span>();
<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="string">b&quot;Some plaintext&quot;</span>;
<span class="kw">let</span> <span class="ident">ad</span> <span class="op">=</span> <span class="string">b&quot;Some additional data&quot;</span>;

<span class="kw">let</span> <span class="ident">c</span> <span class="op">=</span> <span class="ident">aead::seal</span>(<span class="ident">m</span>, <span class="prelude-val">Some</span>(<span class="ident">ad</span>), <span class="kw-2">&amp;</span><span class="ident">n</span>, <span class="kw-2">&amp;</span><span class="ident">k</span>);
<span class="kw">let</span> <span class="ident">m2</span> <span class="op">=</span> <span class="ident">aead::open</span>(<span class="kw-2">&amp;</span><span class="ident">c</span>, <span class="prelude-val">Some</span>(<span class="ident">ad</span>), <span class="kw-2">&amp;</span><span class="ident">n</span>, <span class="kw-2">&amp;</span><span class="ident">k</span>).<span class="ident">unwrap</span>();

<span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span><span class="ident">m</span>[..], <span class="kw-2">&amp;</span><span class="ident">m2</span>[..]);</pre></div>
<h1 id="example-detached-mode" class="section-header"><a href="#example-detached-mode">Example (detached mode)</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sodiumoxide::crypto::aead</span>;

<span class="kw">let</span> <span class="ident">k</span> <span class="op">=</span> <span class="ident">aead::gen_key</span>();
<span class="kw">let</span> <span class="ident">n</span> <span class="op">=</span> <span class="ident">aead::gen_nonce</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">m</span> <span class="op">=</span> [<span class="number">0x41</span>, <span class="number">0x42</span>, <span class="number">0x43</span>, <span class="number">0x44</span>];
<span class="kw">let</span> <span class="ident">m2</span> <span class="op">=</span> <span class="ident">m</span>.<span class="ident">clone</span>();
<span class="kw">let</span> <span class="ident">ad</span> <span class="op">=</span> <span class="string">b&quot;Some additional data&quot;</span>;

<span class="kw">let</span> <span class="ident">t</span> <span class="op">=</span> <span class="ident">aead::seal_detached</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">m</span>, <span class="prelude-val">Some</span>(<span class="ident">ad</span>), <span class="kw-2">&amp;</span><span class="ident">n</span>, <span class="kw-2">&amp;</span><span class="ident">k</span>);
<span class="ident">aead::open_detached</span>(<span class="kw-2">&amp;</span><span class="kw-2">mut</span> <span class="ident">m</span>, <span class="prelude-val">Some</span>(<span class="ident">ad</span>), <span class="kw-2">&amp;</span><span class="ident">t</span>, <span class="kw-2">&amp;</span><span class="ident">n</span>, <span class="kw-2">&amp;</span><span class="ident">k</span>).<span class="ident">unwrap</span>();

<span class="macro">assert_eq!</span>(<span class="ident">m</span>, <span class="ident">m2</span>);</pre></div>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2>
<table><tr class="import-item"><td><code>pub use self::<a class="mod" href="xchacha20poly1305_ietf/index.html" title="mod sodiumoxide::crypto::aead::xchacha20poly1305_ietf">xchacha20poly1305_ietf</a>::*;</code></td><td class="docblock-short"></td></tr></table><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="aes256gcm/index.html" title="sodiumoxide::crypto::aead::aes256gcm mod">aes256gcm</a></td><td class="docblock-short"><p>WARNING: Despite being the most popular AEAD construction due to its use in
TLS, safely using AES-GCM in a different context is tricky. No more than
~ 350 GB of input data should be encrypted with a given key. This is for
~ 16 KB messages - actual figures vary according to message sizes.
In addition, nonces are short and repeated nonces would totally destroy the
security of this scheme. Nonces should thus come from atomic counters,
which can be difficult to set up in a distributed environment.
Unless you absolutely need AES-GCM, use the
<a href="index.html">default AEAD export</a>
instead - it doesn’t have any of these limitations. Or, if you don’t need
to authenticate additional data, just stick to <a href="../secretbox/index.html">secretbox</a>.</p>
</td></tr><tr class="module-item"><td><a class="mod" href="chacha20poly1305/index.html" title="sodiumoxide::crypto::aead::chacha20poly1305 mod">chacha20poly1305</a></td><td class="docblock-short"><p>The original ChaCha20-Poly1305 construction can safely encrypt a pratically
unlimited number of messages with the same key, without any practical limit
to the size of a message (up to ~ 2^64 bytes).</p>
</td></tr><tr class="module-item"><td><a class="mod" href="chacha20poly1305_ietf/index.html" title="sodiumoxide::crypto::aead::chacha20poly1305_ietf mod">chacha20poly1305_ietf</a></td><td class="docblock-short"><p>The IETF variant of the ChaCha20-Poly1305 construction can safely encrypt a
practically unlimited number of messages, but individual messages cannot
exceed 64*(2^32)-64 bytes (approximatively 256 GB).</p>
</td></tr><tr class="module-item"><td><a class="mod" href="xchacha20poly1305_ietf/index.html" title="sodiumoxide::crypto::aead::xchacha20poly1305_ietf mod">xchacha20poly1305_ietf</a></td><td class="docblock-short"><p>The XChaCha20-Poly1305 construction can safely encrypt a practically
unlimited number of messages with the same key, without any practical limit
to the size of the message (up to ~ 2^64 bytes).</p>
</td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="sodiumoxide" data-search-index-js="../../../search-index.js" data-search-js="../../../search.js"></div>
    <script src="../../../main.js"></script></body></html>