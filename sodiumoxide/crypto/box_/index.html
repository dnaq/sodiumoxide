<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Public-key authenticated encryption"><meta name="keywords" content="rust, rustlang, rust-lang, box_"><title>sodiumoxide::crypto::box_ - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../sodiumoxide/index.html'><div class='logo-container rust-logo'><img src='../../../rust-logo.png' alt='logo'></div></a><p class="location">Module box_</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li></ul></div><p class="location"><a href="../../index.html">sodiumoxide</a>::<wbr><a href="../index.html">crypto</a></p><div id="sidebar-vars" data-name="box_" data-ty="mod" data-relpath="../"></div><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button">?</button>
                <a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">sodiumoxide</a>::<wbr><a href="../index.html">crypto</a>::<wbr><a class="mod" href="">box_</a><button id="copy-path" onclick="copy_path(this)"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item import"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/sodiumoxide/crypto/box_/mod.rs.html#1-78" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Public-key authenticated encryption</p>
<h1 id="security-model" class="section-header"><a href="#security-model">Security model</a></h1>
<p>The <code>seal()</code> function is designed to meet the standard notions of privacy and
third-party unforgeability for a public-key authenticated-encryption scheme
using nonces. For formal definitions see, e.g., Jee Hea An, “Authenticated
encryption in the public-key setting: security notions and analyses,”
<a href="http://eprint.iacr.org/2001/079">http://eprint.iacr.org/2001/079</a>.</p>
<p>Distinct messages between the same {sender, receiver} set are required
to have distinct nonces. For example, the lexicographically smaller
public key can use nonce 1 for its first message to the other key, nonce
3 for its second message, nonce 5 for its third message, etc., while the
lexicographically larger public key uses nonce 2 for its first message
to the other key, nonce 4 for its second message, nonce 6 for its third
message, etc. Nonces are long enough that randomly generated nonces have
negligible risk of collision.</p>
<p>There is no harm in having the same nonce for different messages if the
{sender, receiver} sets are different. This is true even if the sets
overlap. For example, a sender can use the same nonce for two different
messages if the messages are sent to two different public keys.</p>
<p>The <code>seal()</code> function is not meant to provide non-repudiation. On the
contrary: the <code>seal()</code> function guarantees repudiability. A receiver
can freely modify a boxed message, and therefore cannot convince third
parties that this particular message came from the sender. The sender
and receiver are nevertheless protected against forgeries by other
parties. In the terminology of
<a href="http://groups.google.com/group/sci.crypt/msg/ec5c18b23b11d82c">http://groups.google.com/group/sci.crypt/msg/ec5c18b23b11d82c</a>,
crypto_box uses “public-key authenticators” rather than “public-key
signatures.”</p>
<p>Users who want public verifiability (or receiver-assisted public
verifiability) should instead use signatures (or signcryption).
Signature support is a high priority for <code>NaCl</code>; a signature API will be
described in subsequent <code>NaCl</code> documentation.</p>
<h1 id="selected-primitive" class="section-header"><a href="#selected-primitive">Selected primitive</a></h1>
<p><code>seal()</code> is <code>crypto_box_curve25519xsalsa20poly1305</code> , a particular
combination of Curve25519, Salsa20, and Poly1305 specified in
<a href="http://nacl.cr.yp.to/valid.html">Cryptography in <code>NaCl</code></a>.</p>
<p>This function is conjectured to meet the standard notions of privacy and
third-party unforgeability.</p>
<h1 id="example-simple-interface" class="section-header"><a href="#example-simple-interface">Example (simple interface)</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sodiumoxide::crypto::box_</span>;

<span class="kw">let</span> (<span class="ident">ourpk</span>, <span class="ident">oursk</span>) <span class="op">=</span> <span class="ident">box_::gen_keypair</span>();
<span class="comment">// normally theirpk is sent by the other party</span>
<span class="kw">let</span> (<span class="ident">theirpk</span>, <span class="ident">theirsk</span>) <span class="op">=</span> <span class="ident">box_::gen_keypair</span>();
<span class="kw">let</span> <span class="ident">nonce</span> <span class="op">=</span> <span class="ident">box_::gen_nonce</span>();
<span class="kw">let</span> <span class="ident">plaintext</span> <span class="op">=</span> <span class="string">b&quot;some data&quot;</span>;
<span class="kw">let</span> <span class="ident">ciphertext</span> <span class="op">=</span> <span class="ident">box_::seal</span>(<span class="ident">plaintext</span>, <span class="kw-2">&amp;</span><span class="ident">nonce</span>, <span class="kw-2">&amp;</span><span class="ident">theirpk</span>, <span class="kw-2">&amp;</span><span class="ident">oursk</span>);
<span class="kw">let</span> <span class="ident">their_plaintext</span> <span class="op">=</span> <span class="ident">box_::open</span>(<span class="kw-2">&amp;</span><span class="ident">ciphertext</span>, <span class="kw-2">&amp;</span><span class="ident">nonce</span>, <span class="kw-2">&amp;</span><span class="ident">ourpk</span>, <span class="kw-2">&amp;</span><span class="ident">theirsk</span>).<span class="ident">unwrap</span>();
<span class="macro">assert!</span>(<span class="ident">plaintext</span> <span class="op">=</span><span class="op">=</span> <span class="kw-2">&amp;</span><span class="ident">their_plaintext</span>[..]);</pre></div>
<h1 id="example-precomputation-interface" class="section-header"><a href="#example-precomputation-interface">Example (precomputation interface)</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">sodiumoxide::crypto::box_</span>;

<span class="kw">let</span> (<span class="ident">ourpk</span>, <span class="ident">oursk</span>) <span class="op">=</span> <span class="ident">box_::gen_keypair</span>();
<span class="kw">let</span> (<span class="ident">theirpk</span>, <span class="ident">theirsk</span>) <span class="op">=</span> <span class="ident">box_::gen_keypair</span>();
<span class="kw">let</span> <span class="ident">our_precomputed_key</span> <span class="op">=</span> <span class="ident">box_::precompute</span>(<span class="kw-2">&amp;</span><span class="ident">theirpk</span>, <span class="kw-2">&amp;</span><span class="ident">oursk</span>);
<span class="kw">let</span> <span class="ident">nonce</span> <span class="op">=</span> <span class="ident">box_::gen_nonce</span>();
<span class="kw">let</span> <span class="ident">plaintext</span> <span class="op">=</span> <span class="string">b&quot;plaintext&quot;</span>;
<span class="kw">let</span> <span class="ident">ciphertext</span> <span class="op">=</span> <span class="ident">box_::seal_precomputed</span>(<span class="ident">plaintext</span>, <span class="kw-2">&amp;</span><span class="ident">nonce</span>, <span class="kw-2">&amp;</span><span class="ident">our_precomputed_key</span>);
<span class="comment">// this will be identical to our_precomputed_key</span>
<span class="kw">let</span> <span class="ident">their_precomputed_key</span> <span class="op">=</span> <span class="ident">box_::precompute</span>(<span class="kw-2">&amp;</span><span class="ident">ourpk</span>, <span class="kw-2">&amp;</span><span class="ident">theirsk</span>);
<span class="kw">let</span> <span class="ident">their_plaintext</span> <span class="op">=</span> <span class="ident">box_::open_precomputed</span>(<span class="kw-2">&amp;</span><span class="ident">ciphertext</span>, <span class="kw-2">&amp;</span><span class="ident">nonce</span>,
                                             <span class="kw-2">&amp;</span><span class="ident">their_precomputed_key</span>).<span class="ident">unwrap</span>();
<span class="macro">assert!</span>(<span class="ident">plaintext</span> <span class="op">=</span><span class="op">=</span> <span class="kw-2">&amp;</span><span class="ident">their_plaintext</span>[..]);</pre></div>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2>
<table><tr class="import-item"><td><code>pub use self::<a class="mod" href="curve25519xsalsa20poly1305/index.html" title="mod sodiumoxide::crypto::box_::curve25519xsalsa20poly1305">curve25519xsalsa20poly1305</a>::*;</code></td><td class="docblock-short"></td></tr></table><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="curve25519xsalsa20poly1305/index.html" title="sodiumoxide::crypto::box_::curve25519xsalsa20poly1305 mod">curve25519xsalsa20poly1305</a></td><td class="docblock-short"><p><code>crypto_box_curve25519xsalsa20poly1305</code> , a particular
combination of Curve25519, Salsa20, and Poly1305 specified in
<a href="http://nacl.cr.yp.to/valid.html">Cryptography in <code>NaCl</code></a>.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="sodiumoxide" data-search-index-js="../../../search-index.js" data-search-js="../../../search.js"></div>
    <script src="../../../main.js"></script></body></html>